<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>スマブラの歴史タイムライン</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0f1724;
    --card:#0b1220;
    --accent:#ff5c5c;
    --muted:#94a3b8;
    --glass: rgba(255,255,255,0.04);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:"Noto Sans JP", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:
      radial-gradient(1200px 400px at 10% 10%, rgba(99,102,241,0.06), transparent 8%),
      radial-gradient(900px 300px at 90% 90%, rgba(16,185,129,0.03), transparent 8%),
      var(--bg);
    color:#e6eef8;
    -webkit-font-smoothing:antialiased;
  }
  header{
    padding:28px 20px;
    display:flex;
    gap:16px;
    align-items:center;
    border-bottom:1px solid rgba(255,255,255,0.04);
    position:sticky; top:0; backdrop-filter: blur(6px);
    background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    z-index:30;
  }
  .brand{
    display:flex; gap:12px; align-items:center;
  }
  .logo{
    width:56px;height:56px;border-radius:12px;background:linear-gradient(45deg,#ff8a8a,#ff5c5c);
    display:grid;place-items:center;font-weight:700;color:#0b1220;font-size:20px;box-shadow:0 6px 18px rgba(0,0,0,0.6);
  }
  h1{margin:0;font-size:18px}
  p.lead{margin:0;color:var(--muted);font-size:13px}
  .controls{margin-left:auto;display:flex;gap:10px;align-items:center}
  select, button, input[type="search"]{
    background:var(--glass); border:1px solid rgba(255,255,255,0.03);
    color:inherit;padding:8px 10px;border-radius:10px;font-size:13px;outline:none;
  }
  main{padding:20px;max-width:1100px;margin:24px auto}
  .grid{
    display:grid;
    grid-template-columns: repeat(3,1fr);
    gap:16px;
  }
  @media (max-width: 900px){ .grid{grid-template-columns: repeat(2,1fr);} }
  @media (max-width: 600px){ .grid{grid-template-columns: 1fr;} header{padding:16px} .logo{width:44px;height:44px} }
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:14px;padding:14px;border:1px solid rgba(255,255,255,0.03);
    box-shadow: 0 6px 20px rgba(2,6,23,0.6); cursor:pointer; transition:transform .18s ease, box-shadow .18s;
  }
  .card:hover{ transform: translateY(-6px); box-shadow:0 14px 36px rgba(2,6,23,0.65) }
  .card .title{display:flex;gap:12px;align-items:center}
  .badge{
    width:68px;height:42px;border-radius:8px;background:linear-gradient(180deg,#111827,#0b1220);display:grid;place-items:center;
    font-weight:700;color:var(--accent);font-size:13px;border:1px solid rgba(255,255,255,0.03);
  }
  .meta{color:var(--muted);font-size:13px;margin-top:8px}
  .desc{margin-top:10px;color:#cfe6ff;font-size:14px;line-height:1.4}
  .tags{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap}
  .tag{font-size:12px;color:var(--muted);background:rgba(255,255,255,0.02);padding:6px 8px;border-radius:999px}
  footer{max-width:1100px;margin:10px auto 50px;color:var(--muted);font-size:13px;text-align:center}
  /* Modal */
  .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.65);display:none;align-items:center;justify-content:center;z-index:60;padding:20px}
  .modal{background:linear-gradient(180deg,#071023,#05101a);border-radius:12px;padding:20px;max-width:880px;width:100%;border:1px solid rgba(255,255,255,0.04)}
  .modal .row{display:flex;gap:18px}
  .cover{width:220px;height:140px;border-radius:8px;background:linear-gradient(90deg,#0b1220,#071227);display:flex;align-items:center;justify-content:center;font-weight:800;font-size:18px;color:var(--accent)}
  .close{margin-left:auto;background:transparent;border:0;color:var(--muted);font-size:18px;cursor:pointer}
  /* small helpers */
  .muted{color:var(--muted)}
  .center{display:flex;align-items:center;justify-content:center}
  .empty{padding:40px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:1px dashed rgba(255,255,255,0.02)}
</style>
</head>
<body>
<header>
  <div class="brand">
    <div class="logo">SSB</div>
    <div>
      <h1>スマブラの歴史タイムライン</h1>
      <p class="lead">主要作のリリースと特徴をインタラクティブに紹介します。カードをクリックして詳細を確認してください。</p>
    </div>
  </div>

  <div class="controls" role="toolbar" aria-label="controls">
    <input type="search" id="q" placeholder="タイトルで検索（例: Melee）" />
    <select id="filter">
      <option value="all">すべて</option>
      <option value="home">家庭用（例: N64, GameCube, Wii, Switch）</option>
      <option value="handheld">携帯機（3DS）</option>
    </select>
    <select id="sort">
      <option value="asc">年代: 古→新</option>
      <option value="desc">年代: 新→古</option>
    </select>
    <button id="reset">リセット</button>
  </div>
</header>

<main>
  <section id="timeline">
    <div class="grid" id="grid">
      <!-- カードがここに入る -->
    </div>
  </section>
  <section id="empty" style="display:none;margin-top:18px">
    <div class="empty center">
      <div>
        <strong>該当する作品がありません。</strong>
        <p class="muted">検索語やフィルタを確認してください。</p>
      </div>
    </div>
  </section>
</main>

<footer>
  出典（代表）: Wikipedia / SSBWiki など。個別詳細はカードを参照してください。  
  （リリース年の詳細は会話内の参照リンクを確認してください。） 
</footer>

<!-- モーダル -->
<div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-hidden="true">
  <div class="modal" role="document">
    <div style="display:flex;align-items:center;gap:12px">
      <div id="modalTitle" style="font-weight:800;font-size:18px">タイトル</div>
      <button class="close" id="closeModal" title="閉じる">✕</button>
    </div>
    <div class="row" style="margin-top:12px">
      <div class="cover" id="modalCover">IMG</div>
      <div style="flex:1">
        <div id="modalYear" class="muted">年</div>
        <p id="modalDesc" style="margin-top:10px;color:#dff1ff"></p>
        <div class="tags" id="modalTags"></div>
        <div style="margin-top:12px;color:var(--muted);font-size:13px" id="modalSource"></div>
      </div>
    </div>
  </div>
</div>

<script>
/* データ: 代表的な5作品（必要なら拡張してください） */
const GAMES = [
  {
    id: "ssb64",
    title: "Super Smash Bros. (N64)",
    year: 1999,
    type: "home",
    short: "シリーズ第1作。任天堂キャラ多数が対戦するクロスオーバー格闘。",
    desc: "『大乱闘スマッシュブラザーズ』は1999年にNINTENDO 64で登場。従来の体力ゲージではなくダメージの“%”で表す独特のシステムが特徴。シリーズの礎を築いた作品です。",
    source: "Wikipedia / SmashWiki",
    coverEmoji: "🟡"
  },
  {
    id: "melee",
    title: "Super Smash Bros. Melee (GameCube)",
    year: 2001,
    type: "home",
    short: "GameCube向け。対戦スピードと奥深さで高い評価を受ける。",
    desc: "『スマブラDX（Melee）』は2001年に登場。操作やコンボ性が高く、競技シーン（大会）で長年人気を保つタイトルとなりました。",
    source: "Wikipedia / SmashWiki",
    coverEmoji: "🔵"
  },
  {
    id: "brawl",
    title: "Super Smash Bros. Brawl (Wii)",
    year: 2008,
    type: "home",
    short: "Wiiでの3作目。新要素とストーリーモード（亜空の使者）を導入。",
    desc: "『スマブラX（Brawl）』は2008年にWiiで発売。新キャラやトリプルジャンプなどの要素、そしてストーリー仕立てのモード『亜空の使者』が話題になりました。",
    source: "Wikipedia / SSBWiki",
    coverEmoji: "⚪"
  },
  {
    id: "ssb4",
    title: "Super Smash Bros. for 3DS / for Wii U",
    year: 2014,
    type: "home",
    short: "3DS と Wii U で同時世代（画面差はあり）。多数のDLCを展開。",
    desc: "『スマブラ for 3DS / for Wii U』は2014年発売。携帯機と据え置きの両対応で、それぞれ独自ステージなどもあり、DLCによる追加キャラが大きな話題となりました。",
    source: "Wikipedia",
    coverEmoji: "🟢"
  },
  {
    id: "ultimate",
    title: "Super Smash Bros. Ultimate (Switch)",
    year: 2018,
    type: "home",
    short: "『すべての参戦ファイター』を掲げた集大成。最多コンテンツ。",
    desc: "『スマブラSPECIAL（Ultimate）』は2018年にNintendo Switchで発売。過去作のキャラをほぼ網羅し、膨大なコンテンツと綿密なチューニングで高評価を得ました。",
    source: "Wikipedia / SSBWiki",
    coverEmoji: "🔴"
  }
];

/* DOM */
const grid = document.getElementById('grid');
const qInput = document.getElementById('q');
const filterSel = document.getElementById('filter');
const sortSel = document.getElementById('sort');
const resetBtn = document.getElementById('reset');
const emptyBox = document.getElementById('empty');

function renderList(items){
  grid.innerHTML = '';
  if(items.length === 0){
    emptyBox.style.display = 'block';
    return;
  } else { emptyBox.style.display = 'none'; }
  items.forEach(g=>{
    const card = document.createElement('article');
    card.className = 'card';
    card.tabIndex = 0;
    card.setAttribute('data-id', g.id);
    card.innerHTML = `
      <div class="title">
        <div class="badge">${g.year}</div>
        <div style="flex:1">
          <div style="display:flex;align-items:center;gap:8px">
            <strong>${g.title}</strong>
          </div>
          <div class="meta">${g.short}</div>
        </div>
      </div>
      <div class="desc">${g.desc.slice(0,120)}${g.desc.length>120?'…':''}</div>
      <div class="tags">
        <div class="tag">${g.type==='home'?'家庭用':'携帯機'}</div>
        <div class="tag">出典: ${g.source}</div>
      </div>
    `;
    card.addEventListener('click', ()=> openModal(g));
    card.addEventListener('keydown', (e)=>{ if(e.key==='Enter') openModal(g); });
    grid.appendChild(card);
  });
}

/* フィルタ・検索 */
function applyFilters(){
  const q = qInput.value.trim().toLowerCase();
  const filter = filterSel.value;
  let items = GAMES.slice();

  if(filter === 'home') items = items.filter(i=> i.type === 'home');
  if(filter === 'handheld') items = items.filter(i=> i.type === 'handheld');

  if(q) items = items.filter(i=> (i.title + ' ' + i.desc + ' ' + i.short).toLowerCase().includes(q));

  const order = sortSel.value;
  items.sort((a,b)=> order==='asc' ? a.year - b.year : b.year - a.year);

  renderList(items);
}

/* リセット */
resetBtn.addEventListener('click', ()=>{
  qInput.value=''; filterSel.value='all'; sortSel.value='asc';
  applyFilters();
});

/* イベント */
[qInput, filterSel, sortSel].forEach(el => el.addEventListener('input', applyFilters));

/* モーダル */
const modalBackdrop = document.getElementById('modalBackdrop');
const modalTitle = document.getElementById('modalTitle');
const modalCover = document.getElementById('modalCover');
const modalYear = document.getElementById('modalYear');
const modalDesc = document.getElementById('modalDesc');
const modalTags = document.getElementById('modalTags');
const modalSource = document.getElementById('modalSource');
const closeModalBtn = document.getElementById('closeModal');

function openModal(game){
  modalTitle.textContent = game.title;
  modalCover.textContent = game.coverEmoji;
  modalYear.textContent = 'リリース年: ' + game.year;
  modalDesc.textContent = game.desc;
  modalTags.innerHTML = '';
  const t = document.createElement('div'); t.className='tag'; t.textContent = game.type==='home' ? '家庭用' : '携帯機';
  modalTags.appendChild(t);
  const s = document.createElement('div'); s.className='tag'; s.textContent = '出典: ' + game.source;
  modalTags.appendChild(s);
  modalSource.innerHTML = `<small class="muted">（注）より詳細な地域別リリース日は外部出典を参照してください。）</small>`;
  modalBackdrop.style.display = 'flex';
  modalBackdrop.setAttribute('aria-hidden','false');
  document.body.style.overflow = 'hidden';
}

function closeModal(){
  modalBackdrop.style.display = 'none';
  modalBackdrop.setAttribute('aria-hidden','true');
  document.body.style.overflow = '';
}

closeModalBtn.addEventListener('click', closeModal);
modalBackdrop.addEventListener('click', (e)=>{
  if(e.target === modalBackdrop) closeModal();
});
document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });

/* 初期表示 */
renderList(GAMES.slice().sort((a,b)=> a.year - b.year));
</script>
</body>
</html>
